
   FAIL  Tests\Feature\Sales\MarketingTaskTest
  Γ¿» leader can create marketing task                                                                             2.32s  
  Γ£ô marketer cannot create marketing task                                                                        0.14s  
  Γ¿» leader can update task status                                                                                0.16s  
  Γ£ô marketer cannot update task status                                                                           0.10s  
  Γ¿» leader can list task projects                                                                                0.12s  
  Γ¿» leader can view project for tasks                                                                            0.12s  
  Γ£ô create task validates required fields                                                                        0.11s  
  Γ¿» task defaults participating marketers count to 4                                                             0.12s  
  Γ¿» task optional fields can be null                                                                             0.12s  
  Γ£ô update task validates status enum                                                                            0.12s  

   FAIL  Tests\Feature\Sales\SalesAttendanceTest
  Γ¿» employee can view their schedules                                                                            0.11s  
  Γ£ô leader can create schedule for team member                                                                   0.24s  
  Γ£ô employee cannot create schedule                                                                              0.11s  
  Γ¿» leader can view team schedules                                                                               0.12s  
  Γ¿» filter team schedules by user                                                                                0.10s  
  Γ¿» filter schedules by date range                                                                               0.11s  
  Γ¿» filter team schedules by project                                                                             0.13s  
  Γ£ô create schedule validates required fields                                                                    0.12s  
  Γ¿» leader can update project emergency contacts                                                                 0.11s  
  Γ£ô employee cannot update emergency contacts                                                                    0.13s  

   FAIL  Tests\Feature\Sales\SalesAuthorizationTest
  Γ£ô dashboard requires authentication                                                                            0.11s  
  Γ£ô dashboard requires sales role                                                                                0.13s  
  Γ£ô sales employee can access dashboard                                                                          0.14s  
  Γ£ô admin can access dashboard                                                                                   0.12s  
  Γ£ô projects list requires sales role                                                                            0.12s  
  Γ£ô sales employee can list projects                                                                             0.16s  
  Γ£ô employee can view own reservations                                                                           0.13s  
  Γ¿» employee cannot view other users reservation details                                                         0.12s  
  Γ£ô admin can access all reservations                                                                            0.12s  
  Γ¿» leader can create targets                                                                                    0.12s  
  Γ£ô employee cannot create targets                                                                               0.10s  
  Γ¿» marketer can update own target status                                                                        0.11s  
  Γ¿» marketer cannot update other marketers target                                                                0.19s  
  Γ£ô leader can access team projects                                                                              0.14s  
  Γ£ô employee cannot access team projects                                                                         0.12s  
  Γ£ô leader can access team members                                                                               0.10s  
  Γ£ô employee cannot access team members                                                                          0.12s  
  Γ£ô leader can update emergency contacts                                                                         0.10s  
  Γ£ô employee cannot update emergency contacts                                                                    0.12s  
  Γ¿» employee can view own attendance                                                                             0.13s  
  Γ¿» leader can view team attendance                                                                              0.12s  
  Γ£ô employee cannot view team attendance                                                                         0.13s  
  Γ£ô leader can create attendance schedule                                                                        0.15s  
  Γ£ô employee cannot create attendance schedule                                                                   0.11s  
  Γ¿» leader can create marketing tasks                                                                            0.12s  
  Γ£ô employee cannot create marketing tasks                                                                       0.12s  
  Γ¿» leader can update marketing task status                                                                      0.13s  
  Γ£ô employee cannot update marketing task status                                                                 0.13s  
  Γ£ô admin can assign projects to leaders                                                                         0.11s  
  Γ£ô sales leader cannot assign projects                                                                          0.12s  
  Γ£ô non sales user cannot access any sales endpoints                                                             0.14s  

   FAIL  Tests\Feature\Sales\SalesDashboardTest
  Γ£ô dashboard returns kpi counts                                                                                 0.11s  
  Γ£ô dashboard scope me filters by employee                                                                       0.14s  
  Γ£ô dashboard scope team filters by team                                                                         0.11s  
  Γ£ô dashboard calculates percent confirmed correctly                                                             0.13s  
  Γ¿» dashboard date range filters correctly                                                                       0.13s  
  Γ£ô dashboard requires authentication                                                                            0.10s  
  Γ£ô dashboard requires sales role                                                                                0.12s  

   FAIL  Tests\Feature\Sales\SalesProjectTest
  Γ¿» project status pending when contract not ready                                                               0.12s  
  Γ£ô project status pending when units have zero price                                                            0.12s  
  Γ¿» project status available when ready and all units priced                                                     0.13s  
  Γ£ô unit can reserve when project available and no reservation                                                   0.13s  
  Γ£ô unit cannot reserve when active reservation exists                                                           0.10s  
  Γ£ô unit computed availability reserved when confirmed                                                           0.12s  
  Γ£ô cancelled reservation does not affect availability                                                           0.12s  
  Γ£ô projects list returns paginated results                                                                      0.17s  
  Γ£ô project units can be filtered by floor                                                                       0.12s  
  Γ£ô reservation context provides complete data                                                                   0.12s  

   PASS  Tests\Feature\Sales\SalesReservationDoubleBookingTest
  Γ£ô first reservation succeeds                                                                                   0.38s  
  Γ£ô second reservation fails with 409 conflict                                                                   0.32s  
  Γ£ô reservation after cancellation succeeds                                                                      0.54s  
  Γ£ô negotiation reservation prevents double booking                                                              0.31s  
  Γ£ô confirmed reservation prevents negotiation                                                                   0.29s  
  Γ£ô unit status updated to reserved on reservation                                                               0.28s  
  Γ£ô unit status reverted to available on cancellation                                                            0.29s  
  Γ£ô multiple cancelled reservations allowed for same unit                                                        0.68s  

   PASS  Tests\Feature\Sales\SalesReservationTest
  Γ£ô create reservation requires all fields                                                                       0.12s  
  Γ£ô negotiation type requires negotiation notes                                                                  0.13s  
  Γ£ô create reservation generates voucher pdf                                                                     0.30s  
  Γ£ô create reservation stores snapshot                                                                           0.30s  
  Γ£ô negotiation reservation creates under negotiation status                                                     0.30s  
  Γ£ô confirmed reservation creates confirmed status                                                               0.30s  
  Γ£ô confirm reservation updates status                                                                           0.30s  
  Γ£ô cannot confirm already confirmed reservation                                                                 0.14s  
  Γ£ô cancel reservation updates status                                                                            0.12s  
  Γ£ô log action on reservation                                                                                    0.10s  
  Γ£ô list my reservations                                                                                         0.12s  
  Γ£ô filter reservations by status                                                                                0.13s  
  Γ£ô download voucher returns pdf                                                                                 0.13s  
  Γ£ô cannot download other users voucher                                                                          0.12s  

   FAIL  Tests\Feature\Sales\SalesTargetTest
  Γ¿» leader can create target                                                                                     0.13s  
  Γ£ô marketer cannot create target                                                                                0.12s  
  Γ¿» marketer can view their targets                                                                              0.12s  
  Γ¿» marketer can update their target status                                                                      0.12s  
  Γ¿» marketer cannot update other marketers target                                                                0.13s  
  Γ¿» filter targets by status                                                                                     0.11s  
  Γ¿» filter targets by date range                                                                                 0.11s  
  Γ¿» target can be project level without unit                                                                     0.10s  
  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > leader can create marketing task                                     
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\MarketingTaskTest.php:57
     53Γûò 
     54Γûò         $response = $this->actingAs($this->leader, 'sanctum')
     55Γûò             ->postJson('/api/sales/marketing-tasks', $data);
     56Γûò 
  Γ₧£  57Γûò         $response->assertStatus(201)
     58Γûò             ->assertJson(['success' => true]);
     59Γûò 
     60Γûò         $this->assertDatabaseHas('marketing_tasks', [
     61Γûò             'contract_id' => $this->contract->id,

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > leader can update task status                                        
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\MarketingTaskService::updateTask() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\MarketingTaskController.php:101
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\MarketingTaskController->update(1, Object(App\Http\Requests\Sales\UpdateMarketingTaskRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\MarketingTaskController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/mark...', Array, Array, Array, Array, '{"status":"in_p...')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/mark...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\MarketingTaskTest.php(94): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/mark...', Array)
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\MarketingTaskTest->test_leader_can_update_task_status()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\MarketingTaskTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\MarketingTaskService::updateTask()

  at tests\Feature\Sales\MarketingTaskTest.php:98
     94Γûò             ->patchJson("/api/sales/marketing-tasks/{$task->id}", [
     95Γûò                 'status' => 'in_progress',
     96Γûò             ]);
     97Γûò 
  Γ₧£  98Γûò         $response->assertStatus(200);
     99Γûò 
    100Γûò         $this->assertDatabaseHas('marketing_tasks', [
    101Γûò             'id' => $task->id,
    102Γûò             'status' => 'in_progress',

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > leader can list task projects                                        
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\MarketingTaskService::listTaskProjects() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\MarketingTaskController.php:26
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\MarketingTaskController->projects(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('projects', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\MarketingTaskController), 'projects')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/task...', Array, Array, Array, Array, '[]')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/task...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\MarketingTaskTest.php(126): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/task...')
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\MarketingTaskTest->test_leader_can_list_task_projects()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\MarketingTaskTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\MarketingTaskService::listTaskProjects()

  at tests\Feature\Sales\MarketingTaskTest.php:128
    124Γûò     {
    125Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    126Γûò             ->getJson('/api/sales/tasks/projects');
    127Γûò 
  Γ₧£ 128Γûò         $response->assertStatus(200)
    129Γûò             ->assertJsonStructure([
    130Γûò                 'success',
    131Γûò                 'data',
    132Γûò             ]);

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > leader can view project for tasks                                    
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests\Feature\Sales\MarketingTaskTest.php:140
    136Γûò     {
    137Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    138Γûò             ->getJson("/api/sales/tasks/projects/{$this->contract->id}");
    139Γûò 
  Γ₧£ 140Γûò         $response->assertStatus(200)
    141Γûò             ->assertJsonStructure([
    142Γûò                 'success',
    143Γûò                 'data' => [
    144Γûò                     'contract_id',

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > task defaults participating marketers count to 4                     
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\MarketingTaskTest.php:176
    172Γûò 
    173Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    174Γûò             ->postJson('/api/sales/marketing-tasks', $data);
    175Γûò 
  Γ₧£ 176Γûò         $response->assertStatus(201);
    177Γûò 
    178Γûò         $task = MarketingTask::first();
    179Γûò         $this->assertEquals(4, $task->participating_marketers_count);
    180Γûò     }

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\MarketingTaskTest > task optional fields can be null                                     
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\MarketingTaskTest.php:194
    190Γûò 
    191Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    192Γûò             ->postJson('/api/sales/marketing-tasks', $data);
    193Γûò 
  Γ₧£ 194Γûò         $response->assertStatus(201);
    195Γûò 
    196Γûò         $task = MarketingTask::first();
    197Γûò         $this->assertNull($task->design_link);
    198Γûò         $this->assertNull($task->design_number);

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > employee can view their schedules                                  
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:29
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->my(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'my')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAttendanceTest.php(59): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAttendanceTest->test_employee_can_view_their_schedules()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAttendanceTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules()

  at tests\Feature\Sales\SalesAttendanceTest.php:61
     57Γûò 
     58Γûò         $response = $this->actingAs($this->employee, 'sanctum')
     59Γûò             ->getJson('/api/sales/attendance/my');
     60Γûò 
  Γ₧£  61Γûò         $response->assertStatus(200);
     62Γûò         $this->assertCount(3, $response->json('data'));
     63Γûò     }
     64Γûò 
     65Γûò     public function test_leader_can_create_schedule_for_team_member()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > leader can view team schedules                                     
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:56
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->team(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('team', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'team')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAttendanceTest.php(124): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAttendanceTest->test_leader_can_view_team_schedules()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAttendanceTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules()

  at tests\Feature\Sales\SalesAttendanceTest.php:126
    122Γûò 
    123Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    124Γûò             ->getJson('/api/sales/attendance/team');
    125Γûò 
  Γ₧£ 126Γûò         $response->assertStatus(200);
    127Γûò         $this->assertCount(3, $response->json('data'));
    128Γûò     }
    129Γûò 
    130Γûò     public function test_filter_team_schedules_by_user()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > filter team schedules by user                                      
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:56
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->team(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('team', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'team')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAttendanceTest.php(149): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAttendanceTest->test_filter_team_schedules_by_user()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAttendanceTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules()

  at tests\Feature\Sales\SalesAttendanceTest.php:151
    147Γûò 
    148Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    149Γûò             ->getJson("/api/sales/attendance/team?user_id={$this->employee->id}");
    150Γûò 
  Γ₧£ 151Γûò         $response->assertStatus(200);
    152Γûò         $this->assertCount(2, $response->json('data'));
    153Γûò     }
    154Γûò 
    155Γûò     public function test_filter_schedules_by_date_range()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > filter schedules by date range                                     
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:29
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->my(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'my')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAttendanceTest.php(172): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAttendanceTest->test_filter_schedules_by_date_range()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAttendanceTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules()

  at tests\Feature\Sales\SalesAttendanceTest.php:174
    170Γûò 
    171Γûò         $response = $this->actingAs($this->employee, 'sanctum')
    172Γûò             ->getJson('/api/sales/attendance/my?from=2025-01-20&to=2025-01-31');
    173Γûò 
  Γ₧£ 174Γûò         $response->assertStatus(200);
    175Γûò         $this->assertCount(1, $response->json('data'));
    176Γûò     }
    177Γûò 
    178Γûò     public function test_filter_team_schedules_by_project()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > filter team schedules by project                                   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:56
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->team(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('team', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'team')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAttendanceTest.php(195): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAttendanceTest->test_filter_team_schedules_by_project()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAttendanceTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules()

  at tests\Feature\Sales\SalesAttendanceTest.php:197
    193Γûò 
    194Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    195Γûò             ->getJson("/api/sales/attendance/team?contract_id={$this->contract->id}");
    196Γûò 
  Γ₧£ 197Γûò         $response->assertStatus(200);
    198Γûò         $this->assertCount(2, $response->json('data'));
    199Γûò     }
    200Γûò 
    201Γûò     public function test_create_schedule_validates_required_fields()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAttendanceTest > leader can update project emergency contacts                       
  Failed asserting that a row in the table [contracts] matches the attributes {
    "id": 20,
    "emergency_contact_number": "0509999999",
    "security_guard_number": "0508888888"
}.

Found similar results: [
    {
        "id": 20,
        "emergency_contact_number": null,
        "security_guard_number": null
    }
].

  at tests\Feature\Sales\SalesAttendanceTest.php:228
    224Γûò             ->patchJson("/api/sales/projects/{$this->contract->id}/emergency-contacts", $data);
    225Γûò 
    226Γûò         $response->assertStatus(200);
    227Γûò 
  Γ₧£ 228Γûò         $this->assertDatabaseHas('contracts', [
    229Γûò             'id' => $this->contract->id,
    230Γûò             'emergency_contact_number' => '0509999999',
    231Γûò             'security_guard_number' => '0508888888',
    232Γûò         ]);

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > employee cannot view other users reservation details            
  Expected response status code [403] but received 400.
Failed asserting that 400 is identical to 403.

  at tests\Feature\Sales\SalesAuthorizationTest.php:142
    138Γûò 
    139Γûò         $response = $this->actingAs($this->salesEmployee, 'sanctum')
    140Γûò             ->postJson("/api/sales/reservations/{$reservation->id}/confirm");
    141Γûò 
  Γ₧£ 142Γûò         $response->assertStatus(403);
    143Γûò     }
    144Γûò 
    145Γûò     public function test_admin_can_access_all_reservations()
    146Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > leader can create targets                                       
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\SalesAuthorizationTest.php:169
    165Γûò 
    166Γûò         $response = $this->actingAs($this->salesLeader, 'sanctum')
    167Γûò             ->postJson('/api/sales/targets', $data);
    168Γûò 
  Γ₧£ 169Γûò         $response->assertStatus(201);
    170Γûò     }
    171Γûò 
    172Γûò     public function test_employee_cannot_create_targets()
    173Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > marketer can update own target status                           
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesTargetService::updateTarget() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php:82
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->update(1, Object(App\Http\Requests\Sales\UpdateTargetRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/targ...', Array, Array, Array, Array, '{"status":"in_p...')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/targ...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAuthorizationTest.php(198): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/targ...', Array)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAuthorizationTest->test_marketer_can_update_own_target_status()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAuthorizationTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesTargetService::updateTarget()

  at tests\Feature\Sales\SalesAuthorizationTest.php:200
    196Γûò 
    197Γûò         $response = $this->actingAs($this->salesEmployee, 'sanctum')
    198Γûò             ->patchJson("/api/sales/targets/{$target->id}", ['status' => 'in_progress']);
    199Γûò 
  Γ₧£ 200Γûò         $response->assertStatus(200);
    201Γûò     }
    202Γûò 
    203Γûò     public function test_marketer_cannot_update_other_marketers_target()
    204Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > marketer cannot update other marketers target                   
  Expected response status code [403] but received 500.
Failed asserting that 500 is identical to 403.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesTargetService::updateTarget() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php:82
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->update(2, Object(App\Http\Requests\Sales\UpdateTargetRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/targ...', Array, Array, Array, Array, '{"status":"comp...')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/targ...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAuthorizationTest.php(216): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/targ...', Array)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAuthorizationTest->test_marketer_cannot_update_other_marketers_target()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAuthorizationTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesTargetService::updateTarget()

  at tests\Feature\Sales\SalesAuthorizationTest.php:218
    214Γûò 
    215Γûò         $response = $this->actingAs($this->salesEmployee, 'sanctum')
    216Γûò             ->patchJson("/api/sales/targets/{$target->id}", ['status' => 'completed']);
    217Γûò 
  Γ₧£ 218Γûò         $response->assertStatus(403);
    219Γûò     }
    220Γûò 
    221Γûò     // ===== Team Management Authorization (Leader Only) =====
    222Γûò

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > employee can view own attendance                                
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:29
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->my(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'my')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAuthorizationTest.php(286): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAuthorizationTest->test_employee_can_view_own_attendance()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAuthorizationTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getMySchedules()

  at tests\Feature\Sales\SalesAuthorizationTest.php:288
    284Γûò     {
    285Γûò         $response = $this->actingAs($this->salesEmployee, 'sanctum')
    286Γûò             ->getJson('/api/sales/attendance/my');
    287Γûò 
  Γ₧£ 288Γûò         $response->assertStatus(200);
    289Γûò     }
    290Γûò 
    291Γûò     public function test_leader_can_view_team_attendance()
    292Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > leader can view team attendance                                 
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesAttendanceController.php:56
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesAttendanceController->team(Object(Illuminate\Http\Request))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('team', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesAttendanceController), 'team')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/atte...', Array, Array, Array, Array, '[]')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/atte...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAuthorizationTest.php(294): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/atte...')
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAuthorizationTest->test_leader_can_view_team_attendance()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAuthorizationTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesAttendanceService::getTeamSchedules()

  at tests\Feature\Sales\SalesAuthorizationTest.php:296
    292Γûò     {
    293Γûò         $response = $this->actingAs($this->salesLeader, 'sanctum')
    294Γûò             ->getJson('/api/sales/attendance/team');
    295Γûò 
  Γ₧£ 296Γûò         $response->assertStatus(200);
    297Γûò     }
    298Γûò 
    299Γûò     public function test_employee_cannot_view_team_attendance()
    300Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > leader can create marketing tasks                               
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\SalesAuthorizationTest.php:353
    349Γûò 
    350Γûò         $response = $this->actingAs($this->salesLeader, 'sanctum')
    351Γûò             ->postJson('/api/sales/marketing-tasks', $data);
    352Γûò 
  Γ₧£ 353Γûò         $response->assertStatus(201);
    354Γûò     }
    355Γûò 
    356Γûò     public function test_employee_cannot_create_marketing_tasks()
    357Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesAuthorizationTest > leader can update marketing task status                         
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\MarketingTaskService::updateTask() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\MarketingTaskController.php:101
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\MarketingTaskController->update(4, Object(App\Http\Requests\Sales\UpdateMarketingTaskRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\MarketingTaskController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Middleware\EnsureSalesLeader.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): App\Http\Middleware\EnsureSalesLeader->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/mark...', Array, Array, Array, Array, '{"status":"in_p...')
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/mark...', Array, Array, 0)
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesAuthorizationTest.php(381): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/mark...', Array)
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesAuthorizationTest->test_leader_can_update_marketing_task_status()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesAuthorizationTest))
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#55 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#56 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\MarketingTaskService::updateTask()

  at tests\Feature\Sales\SalesAuthorizationTest.php:383
    379Γûò 
    380Γûò         $response = $this->actingAs($this->salesLeader, 'sanctum')
    381Γûò             ->patchJson("/api/sales/marketing-tasks/{$task->id}", ['status' => 'in_progress']);
    382Γûò 
  Γ₧£ 383Γûò         $response->assertStatus(200);
    384Γûò     }
    385Γûò 
    386Γûò     public function test_employee_cannot_update_marketing_task_status()
    387Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesDashboardTest > dashboard date range filters correctly                              
  Failed asserting that 0 matches expected 1.

  at tests\Feature\Sales\SalesDashboardTest.php:275
    271Γûò         $response->assertStatus(200);
    272Γûò         $data = $response->json('data');
    273Γûò         
    274Γûò         // Should only count the recent reservation
  Γ₧£ 275Γûò         $this->assertEquals(1, $data['confirmed_reservations']);
    276Γûò     }
    277Γûò 
    278Γûò     public function test_dashboard_requires_authentication()
    279Γûò     {

  1   tests\Feature\Sales\SalesDashboardTest.php:275

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesProjectTest > project status pending when contract not ready       QueryException   
  SQLSTATE[01000]: Warning: 1265 Data truncated for column 'status' at row 1 (Connection: mysql, SQL: insert into `contracts` (`user_id`, `project_name`, `developer_name`, `developer_number`, `city`, `district`, `units`, `project_image_url`, `developer_requiment`, `status`, `notes`, `updated_at`, `created_at`) values (252, odit cum omnis, Schumm-Ferry, 1-410-278-0826, South Otha, Christopher Park, [], https://via.placeholder.com/640x480.png/007711?text=pariatur, Quos eaque ut eos sit culpa., draft, Consectetur autem aut nesciunt odio., 2026-01-25 21:14:40, 2026-01-25 21:14:40))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:824
    820Γûò                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821Γûò                 );
    822Γûò             }
    823Γûò 
  Γ₧£ 824Γûò             throw new QueryException(
    825Γûò                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826Γûò             );
    827Γûò         }
    828Γûò     }

  1   vendor\laravel\framework\src\Illuminate\Database\Connection.php:824

  2   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      NunoMaduro\Collision\Exceptions\TestException::("SQLSTATE[01000]: Warning: 1265 Data truncated for column 'status' at row 1")

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesProjectTest > project status available when ready and all units priced              
  Failed asserting that two strings are equal.
--- Expected
+++ Actual
@@ @@
-'available'
+'pending'

  at tests\Feature\Sales\SalesProjectTest.php:82
     78Γûò         $response = $this->actingAs($this->salesUser, 'sanctum')
     79Γûò             ->getJson("/api/sales/projects/{$contract->id}");
     80Γûò 
     81Γûò         $response->assertStatus(200);
  Γ₧£  82Γûò         $this->assertEquals('available', $response->json('data.sales_status'));
     83Γûò     }
     84Γûò 
     85Γûò     public function test_unit_can_reserve_when_project_available_and_no_reservation()
     86Γûò     {

  1   tests\Feature\Sales\SalesProjectTest.php:82

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > leader can create target                                               
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\SalesTargetTest.php:66
     62Γûò 
     63Γûò         $response = $this->actingAs($this->leader, 'sanctum')
     64Γûò             ->postJson('/api/sales/targets', $data);
     65Γûò 
  Γ₧£  66Γûò         $response->assertStatus(201)
     67Γûò             ->assertJson(['success' => true]);
     68Γûò 
     69Γûò         $this->assertDatabaseHas('sales_targets', [
     70Γûò             'leader_id' => $this->leader->id,

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > marketer can view their targets                                        
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32 and defined in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Services\Sales\SalesTargetService.php:14
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php(32): App\Services\Sales\SalesTargetService->getMyTargets(Array, Object(App\Models\User))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->my(Object(Illuminate\Http\Request))
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'my')
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/targ...', Array, Array, Array, Array, '[]')
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/targ...', Array, Array, 0)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesTargetTest.php(114): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/targ...')
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesTargetTest->test_marketer_can_view_their_targets()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesTargetTest))
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#55 {main}

----------------------------------------------------------------------------------

App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32

  at tests\Feature\Sales\SalesTargetTest.php:116
    112Γûò 
    113Γûò         $response = $this->actingAs($this->marketer, 'sanctum')
    114Γûò             ->getJson('/api/sales/targets/my');
    115Γûò 
  Γ₧£ 116Γûò         $response->assertStatus(200);
    117Γûò         $this->assertCount(3, $response->json('data'));
    118Γûò     }
    119Γûò 
    120Γûò     public function test_marketer_can_update_their_target_status()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > marketer can update their target status                                
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesTargetService::updateTarget() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php:82
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->update(7, Object(App\Http\Requests\Sales\UpdateTargetRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/targ...', Array, Array, Array, Array, '{"status":"in_p...')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/targ...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesTargetTest.php(130): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/targ...', Array)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesTargetTest->test_marketer_can_update_their_target_status()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesTargetTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesTargetService::updateTarget()

  at tests\Feature\Sales\SalesTargetTest.php:134
    130Γûò             ->patchJson("/api/sales/targets/{$target->id}", [
    131Γûò                 'status' => 'in_progress',
    132Γûò             ]);
    133Γûò 
  Γ₧£ 134Γûò         $response->assertStatus(200);
    135Γûò 
    136Γûò         $this->assertDatabaseHas('sales_targets', [
    137Γûò             'id' => $target->id,
    138Γûò             'status' => 'in_progress',

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > marketer cannot update other marketers target                          
  Expected response status code [403] but received 500.
Failed asserting that 500 is identical to 403.

The following exception occurred during the last request:

Error: Call to undefined method App\Services\Sales\SalesTargetService::updateTarget() in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php:82
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->update(8, Object(App\Http\Requests\Sales\UpdateTargetRequest))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('update', Array)
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'update')
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PATCH', '/api/sales/targ...', Array, Array, Array, Array, '{"status":"comp...')
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(471): Illuminate\Foundation\Testing\TestCase->json('PATCH', '/api/sales/targ...', Array, Array, 0)
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesTargetTest.php(155): Illuminate\Foundation\Testing\TestCase->patchJson('/api/sales/targ...', Array)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesTargetTest->test_marketer_cannot_update_other_marketers_target()
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesTargetTest))
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#54 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Services\Sales\SalesTargetService::updateTarget()

  at tests\Feature\Sales\SalesTargetTest.php:159
    155Γûò             ->patchJson("/api/sales/targets/{$target->id}", [
    156Γûò                 'status' => 'completed',
    157Γûò             ]);
    158Γûò 
  Γ₧£ 159Γûò         $response->assertStatus(403);
    160Γûò     }
    161Γûò 
    162Γûò     public function test_filter_targets_by_status()
    163Γûò     {

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > filter targets by status                                               
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32 and defined in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Services\Sales\SalesTargetService.php:14
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php(32): App\Services\Sales\SalesTargetService->getMyTargets(Array, Object(App\Models\User))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->my(Object(Illuminate\Http\Request))
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'my')
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/targ...', Array, Array, Array, Array, '[]')
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/targ...', Array, Array, 0)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesTargetTest.php(186): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/targ...')
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesTargetTest->test_filter_targets_by_status()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesTargetTest))
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#55 {main}

----------------------------------------------------------------------------------

App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32

  at tests\Feature\Sales\SalesTargetTest.php:188
    184Γûò 
    185Γûò         $response = $this->actingAs($this->marketer, 'sanctum')
    186Γûò             ->getJson('/api/sales/targets/my?status=in_progress');
    187Γûò 
  Γ₧£ 188Γûò         $response->assertStatus(200);
    189Γûò         $this->assertCount(1, $response->json('data'));
    190Γûò     }
    191Γûò 
    192Γûò     public function test_filter_targets_by_date_range()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > filter targets by date range                                           
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32 and defined in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Services\Sales\SalesTargetService.php:14
Stack trace:
#0 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php(32): App\Services\Sales\SalesTargetService->getMyTargets(Array, Object(App\Models\User))
#1 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Controller.php(54): App\Http\Controllers\Sales\SalesTargetController->my(Object(Illuminate\Http\Request))
#2 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(43): Illuminate\Routing\Controller->callAction('my', Array)
#3 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Sales\SalesTargetController), 'my')
#4 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Route.php(211): Illuminate\Routing\Route->runController()
#5 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(822): Illuminate\Routing\Route->run()
#6 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#7 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\spatie\laravel-permission\src\Middleware\RoleMiddleware.php(37): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Spatie\Permission\Middleware\RoleMiddleware->handle(Object(Illuminate\Http\Request), Object(Closure), 'sales|sales_lea...')
#9 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#11 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(63): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#13 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#14 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#15 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#16 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#17 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Routing\Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#18 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#19 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#20 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(61): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#40 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#41 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#42 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/sales/targ...', Array, Array, Array, Array, '[]')
#43 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/sales/targ...', Array, Array, 0)
#44 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\tests\Feature\Sales\SalesTargetTest.php(211): Illuminate\Foundation\Testing\TestCase->getJson('/api/sales/targ...')
#45 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\Sales\SalesTargetTest->test_filter_targets_by_date_range()
#46 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#47 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#48 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\Sales\SalesTargetTest))
#49 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#50 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#53 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#54 C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#55 {main}

----------------------------------------------------------------------------------

App\Services\Sales\SalesTargetService::getMyTargets(): Argument #1 ($marketer) must be of type App\Models\User, array given, called in C:\Users\Yusuf\OneDrive\Desktop\Rakez\rakez-erp\app\Http\Controllers\Sales\SalesTargetController.php on line 32

  at tests\Feature\Sales\SalesTargetTest.php:213
    209Γûò 
    210Γûò         $response = $this->actingAs($this->marketer, 'sanctum')
    211Γûò             ->getJson('/api/sales/targets/my?from=2025-01-15&to=2025-01-31');
    212Γûò 
  Γ₧£ 213Γûò         $response->assertStatus(200);
    214Γûò         $this->assertCount(1, $response->json('data'));
    215Γûò     }
    216Γûò 
    217Γûò     public function test_target_can_be_project_level_without_unit()

  ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ  
   FAILED  Tests\Feature\Sales\SalesTargetTest > target can be project level without unit                               
  Expected response status code [201] but received 400.
Failed asserting that 400 is identical to 201.

  at tests\Feature\Sales\SalesTargetTest.php:232
    228Γûò 
    229Γûò         $response = $this->actingAs($this->leader, 'sanctum')
    230Γûò             ->postJson('/api/sales/targets', $data);
    231Γûò 
  Γ₧£ 232Γûò         $response->assertStatus(201);
    233Γûò 
    234Γûò         $this->assertDatabaseHas('sales_targets', [
    235Γûò             'contract_id' => $this->contract->id,
    236Γûò             'contract_unit_id' => null,


  Tests:    30 failed, 68 passed (220 assertions)
  Duration: 17.47s

